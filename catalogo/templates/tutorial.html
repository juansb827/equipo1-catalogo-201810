
{% extends 'base.html' %}

{% block content %}
    {% load static %}

    <link rel="stylesheet" type="text/css" href="{% static '/css/login.css' %}">
    <div class="login-container">
        <div class="overlayed">
            <div class="login-area">
                <div class="container">
                    <form id="formAddTutorial" enctype="multipart/form-data" method="post">
                        <h1>Agregar Tutoriales</h1>
                        {% csrf_token %}
                        <div class="form-group">
                            <label for="name">Nombre del tutorial</label>
                            <input required type="text" class="form-control" id="nameTuto" name="nameTuto" placeholder="Nombre">
                        </div>
                        <div class="form-group">
                            <label for="url">URL del ejemplo</label>
                            <input required type="text" class="form-control" id="url" name="url" placeholder="URL">
                        </div>
                        <div class="form-group">
                            <label for="url">Descripción</label>
                            <input required type="text" class="form-control" id="description" name="description" placeholder="Descripción">
                        </div>
                        <div class="form-row">
                            <div class="form-group col-md-6">
                                <label for="tool">Herramienta</label>
                                <select required class="form-control" id="tool" name="tool">
                                    <option disabled selected value>Seleccione una herramienta</option>
                                    {% for entry in tools %}
                                        <option value="{{ entry.fields.tool }}">{{ entry.fields.name }}</option>
                                    {% endfor %}
                                </select>
                            </div>
                        </div>
                        <button type="submit" class="btn  main-button">Guardar</button>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <script>
    var URL_BASE=window.location.origin;

    $('#formAddTutorial').submit(function (e) {
        e.preventDefault();

        var formData = new FormData($("#formAddTutorial")[0]);
        $.ajax({
            url: URL_BASE+"/catalogo/addTutorial/",
            type: $(this).attr('method'),
            data: formData,
            cache: false,
            processData: false,
            contentType: false,
            success: function(){window.location.reload()}
        });
    });
</script>
{% endblock %}